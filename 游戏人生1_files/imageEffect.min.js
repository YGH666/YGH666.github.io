Site.ImageEffect=!!Site.ImageEffect?Site.ImageEffect:{};(function(a,c,b){c.DATA={};c.DATA.imageEffectHtml="<div class='imageEffects imageEffectsAnimate'></div>";c.DATA.KEY={OPT_MODULE_ID:"moduleId",OPT_IMG_EFF_OPTION:"imgEffOption",OPT_TG_OPTION:"tagetOption",OPT_CALLBACK:"callback",OPT_CALLBACK_ARGS:"callbackArgs",FULL_MASK_BG_STYLE:"fmbgs",FULL_MASK_NAME_STYLE:"fmns",FULL_MASK_NAME_ALIG:"fmna",FULL_MASK_DISC_STYLE:"fmds",FULL_MASK_DISC_ALIG:"fmda",FULL_MASK_CUS_BG:"fullMaskCusBg",FULL_MASK_CUS_NAME:"fullMaskCusName",FULL_MASK_CUS_DISC:"fullMaskCusDisc",FULL_MASK_OPEN_DISC:"fullMaskOpenDisc",HALF_MASK_BG_STYLE:"hmbgs",HALF_MASK_DISC_STYLE:"hmds",HALF_MASK_DISC_ALIG:"hmda",HALF_MASK_CUS_BG:"halfMaskCusBg",HALF_MASK_CUS_DISC:"halfMaskCusDisc",HALF_MASK_OPEN_DISC:"halfMaskOpenDisc",ALIG:{CENTER:1,LEFT:2,RIGHT:3}};c.FUNC={BASIC:{},BUS:{},TOOL:{}};c.ITF={cardTd:Site.bindImageEffectCusEvent_photo,moreCardTd:Site.bindImageEffectCusEvent_photo,"photo-container":Site.bindImageEffectCusEvent_photo,photoForm:Site.bindImageEffectCusEvent_photo,photoMarqueeForm:Site.bindImageEffectCusEvent_photo,photoSmallPic_table:Site.bindImageEffectCusEvent_photo,J_list_photos_masonry_item:Site.bindImageEffectCusEvent_photo,J_list_photos_accordion_item:Site.bindImageEffectCusEvent_photo,productTileForm:Site.bindImageEffectCusEvent_product,productMarqueeForm:Site.bindImageEffectCusEvent_product,"product-container":Site.bindImageEffectCusEvent_product,productDoublePicListForm:Site.bindImageEffectCusEvent_product,containerLeft:Site.bindImageEffectCusEvent_product,productHotTextListHot:Site.bindImageEffectCusEvent_product,productPicListForm:Site.bindImageEffectCusEvent_product,floatImg_J:Site.bindImageEffectCusEvent_floatImg}})(jQuery,Site.ImageEffect);(function(a,c,b){c.FUNC.TOOL.resetImgEff=function(g,o,u,r){var f=g.targetParent;var v=a(o).find("img");if(v.length==0){v=a(o).find(".J_fonticon")}var d=a(v).position().top;var i=a(v).position().left;var e=a(v).width();var m=a(v).height();var t=a(v).css("margin-left");var n=a(u).css("border-left-width");var j=a(o).css("padding").replace("px","");var l=g.paramLayoutType||0;var k=g.picScale||0;var s=a(o).position().top;var q=a(o).height();var p=a(o).parent().css("padding-top").replace("px","");var h=g.moduleStyle||-1;t=c.FUNC.TOOL.parsePixelToInt(t);n=c.FUNC.TOOL.parsePixelToInt(n);if(f=="photoSmallPic_table"){i=0;d=0;t=0;e=a(o).width();m=a(o).height();a(u).css("z-index",1);a(u).css("left",i+t).css("top",d);a(u).css("width",e-(n*2)+"px");a(u).css("height",m-(n*2)+"px")}if(f=="photo-container"||f=="product-container"){if(r!=5){if(l==8&&r==2){a(u).css("left",0).css("top",s-p)}else{if(k==2&&h==89){a(u).css("top",d)}else{if(k==0&&h==30){a(u).css("top",d)}else{a(u).css("left",i+t).css("top",d)}}}if((r==2||r==3||r==5)&&k==2){a(u).css("left",0)}}else{(t>0)&&a(u).css("left",i+t)}}};c.FUNC.TOOL.parsePixelToInt=function(d){var e;if(typeof d=="undefined"||d=="auto"){e=0}else{e=parseInt(d.replace("px"))}return e};c.FUNC.TOOL.colorRgb=function(e){var g=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;var e=e.toLowerCase();var d="#";var h=[];if(e&&g.test(e)){if(e.length===4){for(var f=1;f<4;f+=1){d+=e.slice(f,f+1).concat(e.slice(f,f+1))}e=d}for(var f=1;f<7;f+=2){h.push(parseInt("0x"+e.slice(f,f+2)))}return h.join(",")}else{return e}}})(jQuery,Site.ImageEffect);(function(d,f,e){f.FUNC.BUS.bindImgEffCusEvent=function(h,g){if(typeof f.ITF[g.targetParent]=="function"){f.ITF[g.targetParent](h,g)}};f.FUNC.BUS.ImgEffAnimate=function(m,g,k,l,h){var j={hover:{},leave:{}};var i=d(g).attr("fk_fixed");if(!!!i){if(d(l).hasClass("cardDiv")){c(g,k,l)}else{b(g,k)}}a(j,g,k,h,l);if(!Fai.isIE()){if(m=="mouseenter"){d(g).css(j.hover)}else{if(m=="mouseleave"){d(g).css(j.leave)}}}else{if(m=="mouseenter"){d(g).stop().animate(j.hover,250)}else{if(m=="mouseleave"){d(g).stop().animate(j.leave,250)}}}};function a(q,i,r,n,x){var s=r.effType;var j=1;var m;var u=r.imgShapeType||1;var g;if(d(i).parent().hasClass("cardDiv")){g=d(i).parent()}if(Fai.isIE6()||Fai.isIE7()||Fai.isIE8()){if(r.backgroundType){j=r.fullmaskBackgroundOpacity}else{j=80}if(r[f.DATA.KEY.FULL_MASK_CUS_BG]){var o=r[f.DATA.KEY.FULL_MASK_BG_STYLE];if(typeof o=="string"&&o.length>0){var t=d.parseJSON(o);j=typeof t.o=="number"?t.o:80}}j/=100}switch(s){case 2:q.hover.opacity=1;q.leave.opacity=0;var h,y,l,p;if(u==2||u==4){y=parseInt(d(i).css("borderWidth"));h=d(x).find(".floatImgWrap").width()-2*y;l=d(x).find(".floatImgWrap img").height();p=d(x).find(".floatImgWrap img").width();d(i).css({height:h+"px",width:h+"px",top:"0",left:"0"});if(l>p){d(i).css({marginTop:(l-p)/2+"px"})}else{d(i).css({marginLeft:(p-l)/2+"px"})}if(u==4){d(i).css({borderRadius:"50%"})}}break;case 3:q.hover.opacity=1;q.leave.opacity=0;break;case 4:q.hover.opacity=j;q.leave.opacity=0;break;case 5:d(i).css("opacity",1);q.hover.bottom=0;if(i.length>0){m=i[0].getBoundingClientRect().height}if(typeof m=="undefined"){m=d(i).height()}else{m=Math.round(m)}q.leave.bottom="-"+m+"px";var w;if(g&&g.length>0){w=parseFloat(g.css("margin-top").replace("px",""))||0;q.hover.bottom=-w;q.leave.bottom=(-w-d(i).height())+"px"}break;case 6:var k=parseInt(d(i).attr("_initWidth"));var v=parseInt(d(i).attr("_initHeight"));q.hover.width=k+50;q.hover.height=v+50;if(n==8){q.hover.margin="-25px"}else{q.hover["margin-left"]="-25px";q.hover["margin-top"]="-25px"}if(!!r.isFontIcon){q.hover.fontSize=(k<v?k:v)+50+"px";q.hover.lineHeight=v+50+"px"}q.leave.width=k;q.leave.height=v;if(n==8){q.leave.margin="0px"}else{q.leave["margin-left"]="0px";q.leave["margin-top"]="0px"}if(!!r.isFontIcon){q.leave.fontSize=(k<v?k:v)+"px";q.leave.lineHeight=v+"px"}break;case 7:q.hover["margin-left"]="-10px";q.leave["margin-left"]="0px";break}}function b(t,m){var r=m.effType;if(r==4){var u=d(t).find(".props .propList");var g=d(u).height();var o=d(t).height();var q=((o-g)/2-10);d(u).css("padding-top",q+"px")}if(r==5){var u=d(t).find(".props .propList");var l=d(t).find(".props .propBuy");var i=d(u).height();var n=u.length>0?parseInt(d(u).css("padding-top")):5;var p=u.length>0?parseInt(d(u).css("margin-bottom")):10;var s=d(t).parent().find("img").position().left;var k=d(t).parent().find("img").css("margin-left");i+=n+p;if(d(l).length>0){var j=parseInt(d(l).css("margin-top"));var h=d(l).height()+j+8;i+=h}d(t).css({height:i+"px",bottom:"-"+i+"px",left:s+k+"px"})}d(t).attr("fk_fixed",1)}function c(j,s,A){var t=s.effType;var B,q,w;if(t==4){var h=d(A).parent(),o=-parseFloat(d(A).css("marginLeft").replace("px",""))||0;cardDivMT=-parseFloat(d(A).css("marginTop").replace("px",""))||0;d(j).css({width:h.width()+"px",height:h.height()+"px",left:o+"px",top:cardDivMT+"px"});var n=d(j).find(".props .propList");var r=d(n).height();var u=d(j).height();var z=((u-r)/2);d(n).css("padding-top",z+"px")}else{if(t==5){var j=d(A).find(".imageEffects");B=d(A).parent();q=d(B).width();w=d(B).height();var m=d(B).css("margin-left"),l=parseFloat(d(A).css("margin-left").replace("px",""));var m=f.FUNC.TOOL.parsePixelToInt(m);d(j).removeClass("imageEffectsAnimate").addClass("imageEffectsAnimate_Half");d(j).css("width",q);var g=d(n).height(),n=d(j).find(".props .propList"),v=d(j).find(".props .propBuy"),g=d(n).height(),x=parseInt(d(n).css("padding-top")),p=parseInt(d(n).css("margin-bottom")),i=d(j).parent().find("img").position().left;if(g>0){g+=x+p}if(d(v).length>0){var k=parseInt(d(v).css("margin-top"));var y=d(v).height()+k+8;g+=y}d(j).css("height",g+"px");d(j).css({"padding-left":(-l)+"px"})}else{if(t==6){B=d(A).find("img");q=B.width();w=B.height();if(q==0||w==0){return}d(B).attr("_initWidth",q).attr("_initHeight",w)}else{if(t==7){B=d(A).find("img");q=B.width();if(q==0){return}B.css("width",q+10+"px")}}}}d(j).attr("fk_fixed",1)}})(jQuery,Site.ImageEffect);(function(f,h,g){h.FUNC.BASIC.Init=function(j){var m={};m[h.DATA.KEY.OPT_MODULE_ID]=0;m[h.DATA.KEY.OPT_IMG_EFF_OPTION]={};m[h.DATA.KEY.OPT_TG_OPTION]={};m[h.DATA.KEY.OPT_CALLBACK]=g;m[h.DATA.KEY.OPT_CALLBACK_ARGS]=g;var p=j.moduleId,n=j.imgEffOption;if(!!!e(j,m)){return}var l=f("#module"+m[h.DATA.KEY.OPT_MODULE_ID]);var k=m[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType;if(k==1||Fai.isNull(l)){return}if(!m[h.DATA.KEY.OPT_TG_OPTION].moduleStyle){m[h.DATA.KEY.OPT_TG_OPTION].moduleStyle=l.attr("_modulestyle")}if(l.attr("_intab")!=0){h.cashOptions=h.cashOptions||{};h.cashOptions[j.moduleId]=j}var o=f(l).find(".imageEffects");var i=f(l).find("."+m[h.DATA.KEY.OPT_TG_OPTION].target);if(f(o).length>0){f(o).remove()}f.each(i,function(q,r){if(k>1&&k<6){h.FUNC.BASIC.CreateGE(r,m);h.FUNC.BUS.bindImgEffCusEvent(r,m[h.DATA.KEY.OPT_TG_OPTION]);if(k==4||k==5){if(!Fai.isNull(m[h.DATA.KEY.OPT_CALLBACK])){m[h.DATA.KEY.OPT_CALLBACK](r,m[h.DATA.KEY.OPT_IMG_EFF_OPTION],m[h.DATA.KEY.OPT_TG_OPTION],m[h.DATA.KEY.OPT_CALLBACK_ARGS])}}}else{if(k<=7){h.FUNC.BASIC.CreateSP(r,m)}}});if(k==8){Site.hoverChangeImage(f(l))}else{f(i).off("mouseenter.imageEffectPlugs mouseleave.imageEffectPlugs").on("mouseenter.imageEffectPlugs mouseleave.imageEffectPlugs",function(s){var r=f(this).find(".imageEffects"),q="";if(k<6){h.FUNC.TOOL.resetImgEff(m[h.DATA.KEY.OPT_TG_OPTION],this,r,k)}else{if(k<=8){r=f(this).find("img");if(r.length==0){r=f(this).find(".J_fonticon")}}}q=s.type=="mouseenter"?"mouseenter":"mouseleave";if(k>1&&k<=7){h.FUNC.BUS.ImgEffAnimate(q,r,m[h.DATA.KEY.OPT_IMG_EFF_OPTION],this,m[h.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0)}})}var o=f(l).find(".imageEffects")};h.FUNC.BASIC.CreateGE=function(j,i){c(j,i);b(j,i)};h.FUNC.BASIC.CreateSP=function(j,i){a(j,i);d(j,i)};function e(i,j){if(i.length==0){return false}if(i[h.DATA.KEY.OPT_MODULE_ID]==0){return false}f.extend(j,i);return true}function c(k,i){var l=!Fai.isNull(f(k).find("a"))&&f(k).find("a").length!=0,j;if(l){f(k).find("a").after(h.DATA.imageEffectHtml)}else{j=f(k).find("img");if(j.length==0){j=f(k).find(".J_fonticon")}j.after(h.DATA.imageEffectHtml)}}function b(i,P){if(f(i).find(".J_photoImgPanel").length==0){if(f(i).hasClass("floatImg_J_special")){f(i).css("position","relative")}else{f(i).css("position","relative").css("overflow","hidden")}}if(Fai.isIE6()&&P[h.DATA.KEY.OPT_TG_OPTION].targetParent=="photoSmallPic_table"){f(i).removeAttr("style")}var z=P[h.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0;if(P[h.DATA.KEY.OPT_TG_OPTION].picScale){var D=P[h.DATA.KEY.OPT_TG_OPTION].picScale||0}else{var D=P[h.DATA.KEY.OPT_IMG_EFF_OPTION].ns||0}var m=P[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType;var v=f(i).find(".imageEffects"),n=(m==2)?"imageEffects_Border":(m==3)?"imageEffects_Magnifier":(m==4)?"imageEffects_FullMaks":(m==5)?"imageEffects_HalfMaks":"";var u={bw:(P[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?P[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderWidth:1,bs:(P[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?P[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderStyle:1,bc:(P[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderType)?P[h.DATA.KEY.OPT_IMG_EFF_OPTION].borderColor:(z==8?"#808080":"#000")},B=(u.bs==1)?"solid":(u.bs==2)?"dotted":(u.bs==3)?"dashed":"",T=P[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.FULL_MASK_BG_STYLE],y=P[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.HALF_MASK_BG_STYLE],K={fbc:P[h.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundColor,fbo:P[h.DATA.KEY.OPT_IMG_EFF_OPTION].fullmaskBackgroundOpacity},o={hbc:P[h.DATA.KEY.OPT_IMG_EFF_OPTION].halfmaskBackgroundColor,hbo:P[h.DATA.KEY.OPT_IMG_EFF_OPTION].halfmaskBackgroundOpacity},J={color:"#555555",opacity:80},k={color:"#000",opacity:85};var q,C,l,S,F,w,r,G,H,x,s,O,t,j,N,Q;if(P.moduleType=="photoCard"||P.moduleType=="photoNewCard"||P.moduleType=="photoMoreCard"){q=f(i).parent();C=f(q).width();l=f(q).height();S=f(q).css("margin-left");imgMarginTop=f(q).css("margin-top");F=f(q).position().top;w=f(q).position().left;O=parseFloat(f(i).css("margin-top").replace("px",""));t=parseFloat(f(i).css("margin-left").replace("px",""))}else{r=f(i).position().top;G=f(i).height();H=f(i).width();x=f(i).position().left;s=f(i).parent().css("padding-top");q=f(i).find("img");if(q.length==0){q=f(i).find(".J_fonticon")}C=f(q).width();l=f(q).height();S=f(q).css("margin-left");F=f(q).position().top;w=f(q).position().left;N=f(i).width();Q=f(i).height()}var R=Fai.isIE6()||Fai.isIE7()||Fai.isIE8();var A=P[h.DATA.KEY.OPT_IMG_EFF_OPTION].backgroundType;if(typeof K=="object"&&A){J.color=K.fbc.length!=0?K.fbc:J.color;J.opacity=typeof K.fbo=="number"?K.fbo:J.opacity}var M=P[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.FULL_MASK_CUS_BG];if(typeof T=="string"&&T.length!=0&&M){T=f.parseJSON(T);J.color=T.c.length!=0?T.c:J.color;J.opacity=typeof T.o=="number"?T.o:J.opacity}var I=P[h.DATA.KEY.OPT_IMG_EFF_OPTION].backgroundHalfType;if(typeof o=="object"&&I){k.color=o.hbc.length!=0?o.hbc:k.color;k.opacity=typeof o.hbo=="number"?o.hbo:k.opacity}var p=P[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.HALF_MASK_CUS_BG];var E=P[h.DATA.KEY.OPT_IMG_EFF_OPTION][h.DATA.KEY.HALF_MASK_OPEN_DISC];if(typeof y=="string"&&y.length!=0&&p){y=f.parseJSON(y);k.color=y.c.length!=0?y.c:k.color;k.opacity=typeof y.o=="number"?y.o:k.opacity}S=h.FUNC.TOOL.parsePixelToInt(S);s=h.FUNC.TOOL.parsePixelToInt(s);switch(m){case 1:f(v).css("top",F);break;case 2:if(z==8){H-=u.bw*2;G-=u.bw*2;j=f(i).css("padding").replace("px","");C=H+2*j;l=G+2*j;f(v).css("top",r-s)}else{C-=u.bw*2;l-=u.bw*2;f(v).css("top",F)}f(v).css({"border-width":u.bw+"px","border-style":B});f(v)[0].style["border-image-slice"]=u.bw;f(v).css(Site.CompatibleColor.borderStyle(u.bc));break;case 3:f(v).css("top",F);f(v).css("z-index","1");break;case 4:var L=J.color;Site.colorUtils.attachCompatibleStyleToDom(v[0]||v,L);f(v).css("top",F);break;case 5:var L=k.color;if(p||I){Site.colorUtils.attachCompatibleStyleToDom(v[0]||v,L)}f(v).removeClass("imageEffectsAnimate").addClass("imageEffectsAnimate_Half");f(v).css("bottom","-"+l+"px");break;case 6:f(v).css("top",F);break;case 7:f(v).css("top",F);break}if(P.moduleType=="photoCard"||P.moduleType=="photoNewCard"||P.moduleType=="photoMoreCard"){if(m!=5){f(v).css({top:(-O)+"px"});f(v).css({left:(-t)+"px"})}else{f(v).css({"padding-left":(-t)+"px"})}}else{if(m==2&&z==8){f(v).css("left",0)}else{if(m==4&&(P.imgEffOption.style==2||P.imgEffOption.style==3||P.imgEffOption.style==30)){f(v).css("left",0)}else{f(v).css("left",w+S)}}}if(D==2&&(m==2||m==3||m==5)){if(m==5){f(v).css("width",N).css("height",Q)}else{if(m==2){f(v).css("width",N-u.bw*2).css("height",Q-u.bw*2)}else{f(v).css("width",N-2).css("height",Q-2)}}f(v).css("left",0)}else{if(m==4&&(P.imgEffOption.style==2||P.imgEffOption.style==3||P.imgEffOption.style==30)){f(v).css("width",C+S*2);f(v).css("height",l)}else{f(v).css("width",C);f(v).css("height",l)}}f(v).addClass(n)}function a(o,k){var l=f(o).find("img"),j=k[h.DATA.KEY.OPT_IMG_EFF_OPTION],m,n;if(l.length==0){l=f(o).find(".J_fonticon")}var i=k[h.DATA.KEY.OPT_TG_OPTION].paramLayoutType||0;if(j.effType==6){var q=f(l).width();var p=f(l).height();if(!!j.forRefreshPic){if(!!l.data("realWidth")){q=l.data("realWidth")}if(!!l.data("realHeight")){p=l.data("realHeight")}}if(q==0||p==0){return}f(l).attr("_initWidth",q).attr("_initHeight",p);n=f(l).parent();if(!!j.spScaleUp){if(!n.hasClass("J_spScaleUp")){m='<div class="J_spScaleUp" style="position:relative; overflow:hidden; margin:0px auto;"></div>';n.append(m);n.find(".J_spScaleUp").append(f(l)).css({width:q,height:p})}}else{if(n.hasClass("J_spScaleUp")){n.parent().append(f(l));n.remove()}}}if(j.effType==7){var q=f(l).width();if(q==0){return}if(i==8){f(l).css("width",q+"px")}else{f(l).css("width",q+10+"px")}}}function d(n,j){var o=(j[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==6)?"imageEffectsAnimate_Magnify":"imageEffectsAnimate_MoveLeft";var i=j[h.DATA.KEY.OPT_IMG_EFF_OPTION].style==88||j[h.DATA.KEY.OPT_IMG_EFF_OPTION].style==89||j[h.DATA.KEY.OPT_IMG_EFF_OPTION].style==90;var m=j[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==6||j[h.DATA.KEY.OPT_IMG_EFF_OPTION].effType==7;var k=j[h.DATA.KEY.OPT_TG_OPTION].picScale||0,l=f(n).find("img");if(l.length==0){l=f(n).find(".J_fonticon")}if(!m||!i){f(n).css({overflow:"hidden"})}l.addClass(o).css("margin","0px")}})(jQuery,Site.ImageEffect);